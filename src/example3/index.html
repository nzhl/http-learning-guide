<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>X</title>
  </head>
  <body>
    <button id="b1">raw cross origin get</button>
    <button id="b2">cross origin by window.name </button>
    <button id="b3">cross origin by hash change</button>

    <iframe id="f1" style="width:100%; height: 100px;" src="http://www.foo.com/404"></iframe>
  </body>

  <script>
    const b1 = document.getElementById('b1')
    b1.onclick = async () => {
      const res = await fetch('http://www.bar.com/api/info');
    }

    const b2 = document.getElementById('b2')
    b2.onclick = () => {
      const f1 = document.getElementById('f1');
      f1.src = 'http://www.bar.com/iframe-name';
      f1.onload = () => {
        console.log('aaa', f1.src)
        if (f1.src === 'http://www.bar.com/iframe-name') {
          f1.src = 'http://www.foo.com/404'
        } else {
          console.log(f1.contentWindow.name)
        }
      }
    }

  </script>
</html>
